\documentclass[a4paper,oneside,12pt]{report}

%%%%%%%%%%%%%%%%%%% LOAD PACKAGES %%%%%%%%%%%%%%%%%%%%%
%Get support for äöüßÄÖÜ
\usepackage[utf8]{inputenc}
%Get support for word separation
\usepackage[T1]{fontenc}
%Direkte Verwendung von Umlauten
\usepackage[ansinew]{luainputenc}
%Get Support for US english and german
\usepackage[english,ngerman]{babel}
%verbesserter Randausgleich
\usepackage{microtype}
%zulässiger Wortzwischenraum erhöhen für noch besseren Randausgleich und Blocksatzbildung
\setlength\emergencystretch{1em}
%Einrücken nach Absatz für gesamtes Dokument abstellen
\setlength{\parindent}{0pt} 
%Bildbeschreibung zentrieren
\usepackage[center]{caption}
%Support for Graphics .png .jpg .pdf 
\usepackage{graphicx}
%Zusätzliche Option[H] bei Bildern - Hier und und sonst nirgends!
\usepackage{float}
%Adjust the page margins asymmetrical, Need to be before subfig
\usepackage[left=3.5cm, right=2.5cm, top=3cm, bottom=3cm, a4paper, portrait]{geometry}
%Kopf- und Fußzeilen
\usepackage{fancyhdr}
%für Fußnote (linksbündig)
\usepackage[flushmargin,bottom]{footmisc}
%Erweiterung des Mathematikmoduses
\usepackage{amsmath}
%Use Palatino Linotype 
\usepackage{mathpazo}
%Don´t show "Kapitel 1" at \chapter
\usepackage{titlesec} 
\titleformat{\chapter}{\bfseries\Huge}{\thechapter\quad}{0em}{}
%Abstand Kapitelüberschiften zum Kopfrand
\titlespacing{\chapter}{0pt}{*-2}{*1.5}
\usepackage{setspace}
\AtBeginDocument{\renewcommand{\chaptername}{}}
%Tabellenspalten/zeilen einfärben
\usepackage{colortbl}
%variable Tabellenbreite
\usepackage{tabularx}
%Multirow in Tabelle
\usepackage{multirow}
%Tabellenüberschrift links oben!
\usepackage[singlelinecheck=false]{caption}
%Programmcode einfügen
\usepackage{listings}
%Programmcode Farben ändern
\usepackage{xcolor}
%Hyperlink
\usepackage[colorlinks=true,linkcolor=black, citecolor=black, urlcolor=black]{hyperref}
%Ordnerstruktur erstellen
\usepackage{dirtree}
\usepackage{subfigure}
%Abkuerzungen
\usepackage{acronym}
%Highlighting
\usepackage{color,soul}
%Unterstützung für textumflossenes Bild 
\usepackage{wrapfig}


%//%%%%%%%%%%%%%%%%%% END LOAD PACKAGES %%%%%%%%%%%%%%%%%%%%
%//%%%%%%%%%%%%%%%%%% SETTINGS %%%%%%%%%%%%%%%%%%%%%%%%%
%Adjust headings and footers --> \usepackage{fancyhdr}
%Give the headings some space
\setlength{\headheight}{20pt}
%This is valid for all pages exept chapters
\pagestyle{fancy}

\fancyhf{} % clear all headers and footers
%Ausrichtung Kopf- /Fußzeile
\lhead[]{\fancyplain{}{\leftmark}}
\cfoot[]{\thepage}
\renewcommand{\headrulewidth}{0.4pt}
%For \chapters \maketitle
\fancypagestyle{plain}{%
	\fancyhf{} % clear all header and footer fields
	\cfoot[]{\thepage}%
	\renewcommand{\headrulewidth}{0pt}
	\renewcommand{\footrulewidth}{0pt}
}
%Deactivate command --> small letter
\let\MakeUppercase\relax
%Tiefe von Inhaltsverzeichnis 
\setcounter{secnumdepth}{3}
\setcounter{tocdepth}{3}
%Programmcodeeinstellungen
\lstset{
	backgroundcolor=\color{black!5},
	tabsize=4,
	language=C++,
	captionpos=b,
	tabsize=3,
	frame=lines,
	numbers=left,
	numberstyle=\tiny,
	numbersep=5pt,
	breaklines=true,
	showstringspaces=false,
	basicstyle=\tiny,
	%identifierstyle=\color{magenta},
	keywordstyle=\color[rgb]{0.8,0.4,0},
	commentstyle=\color[rgb]{0.9,0.3,0.9,},
	stringstyle=\color{green},
	emphstyle=\color{blue},
}
%Programmcodeeinstellungen, style Arduino
	\lstdefinestyle{Arduino}{%
		%style=numbers,
		keywords={soup},%                 define keywords
		%morestring=[s]{<}{>},%			  define <> as strings
		morecomment=[l]{\#},%             treat // as comments
		morecomment=[s]{/*}{*/},%         define /* ... */ comments
		emph={void, for, else, if, in, HIGH, OUTPUT, LOW, int, uint8_t, self, def, True, False, print, from, import, as, class, try, except, not, or, return, global},%        keywords to emphasize	
}


%Bennenung von Caption bei Programmcode 
	\renewcommand{\lstlistingname}{Programmcode}
	\renewcommand{\lstlistlistingname}{\lstlistingname}
	%Bennenung von Bilderquelle als "Quelle:"
	\newcommand*{\quelle}{%
		\footnotesize Quelle:
	}

%//%%%%%%%%%%%%%%%%%% END SETTINGS %%%%%%%%%%%%%%%%%%%%%%%%%

%\\%%%%%%%%%%%%%%%%%% DOCUMENT %%%%%%%%%%%%%%%%%%%%%%%%%


\begin{document}
	\include{Deckblatt/deckblatt}
	\pagenumbering{Roman}


%												 Inhaltsverzeichnis
	\newpage
	\tableofcontents
	
	
	
	
	
%											    Kapitel 1 - Einleitung
	%\newpage
	\pagenumbering{arabic}
	\setstretch{1.5}
	\chapter{Problemstellung}\label{probstellung}
	
		
		Im Rahmen eines Forschungsprojektes an der Hochschule München sollen teilweise strukturierte Daten von Webseiten gewonnen werden. 
		\\
		Für nahezu Jedermann bietet das WWW im Vergleich zu damaligen Zeiten ungeahnte Möglichkeiten der Recherche und Themenfindung. Noch nie waren so viele Informationen öffentlich einsehbar wie heute. Meist sind jedoch die gewünschten Inhalte an vielen unterschiedlichen Orten im Web verteilt, auf unterschiedlichste Weisen formatiert oder aufgrund schlechter Informationsarchitektur nur mit größerem Aufwand zu erreichen. Grundsätzlich kann die Fülle an Rechercheergebnissen geradewegs überfordern und nicht immer sind alle relevanten Inhalte über gängige Suchmaschinen auffindbar.
		\\
		Das bedeutet dann oft die mühsame Suche nach den relevanten Informationen in nicht immer nutzerfreundlich gestalteten Datenbanken.
		\\
		Bei so gut wie allen Recherchearbeiten besteht die Aufgabe heutzutage vielfach darin, die sprichwörtliche „Nadel im Heuhaufen“ zu finden.
		In vielen Fällen wünscht man sich deswegen einen gewissen Grad an Automatisierung. Viele Dokumentationsabteilungen verfügen deshalb inzwischen über eine Reihe von Werkzeugen, die ungeordnete Informationsströme im Web kanalisieren, filtern und in einem nutzerfreundlicheren Format ausgeben können. Programmiertechnisch bedient man sich hierfür häufig vorhandener Schnittstellen, die die jeweiligen Quellen zur Verfügung stellen. Neben anwendungsspezifischen APIs sind dies zum Beispiel RSS- oder AtomFeeds, die in eigene Datenbanken geladen und von dort aus weiterverarbeitet werden können. Die Informationen liegen in diesen Fällen also bereits in einem strukturierten Format vor und enthalten wenig bis gar keinen überflüssigen Inhalt.
		\\
		Hingegen wenn keine der genannten Schnittstellen angeboten werden, bleibt die ständige Beobachtung dieser Inhalte schwierig. Sofern es sich bei den Quellen um einfach strukturierte HTML-Seiten handelt, kann man sich mit verschiedenen Tools weiterhelfen. Gerade bei öffentlichen Datenbanken, deren Inhalte über Webformulare abgefragt werden („Deep Web“), ist dies jedoch meistens nicht möglich. Hier können Webscraper weiterhelfen, die das automatisierte „Auslesen“ von bestimmten strukturierten	oder semi-strukturierten Inhalten aus öffentlich zugänglichen Webseiten ermöglichen. 
		\\
		\newline
		Diese Studienarbeit beleuchtet am Beispiel von TripAdvisor wie ein solcher Webscraper implementiert werden kann. Des Weiteren umfasst diese Studienarbeit das automatisierte Abspeichern der gewonnenen Daten in einer strukturierten Datenbank.
		
		%Gewonnene Daten können so Aufschluss über Verhaltensweisen, Interessen und auch mögliche Kaufanregungen geben.
	
	
	

	\chapter{Grundlagen}\label{grlagen}
		
		\section{Was ist WebCrawling?}
		
			\subsection{Definition, Erläuterung etc.}
		
			\subsection{Wie funktioniert es? (Allgemeine Beschreibung)}
		
		\section{Tripadvisor}
		
			\subsection{Was ist das für eine Webseite? Kurze Beschreibung}
			
		\section{Was sind strukturierte und unstrukturierte Daten?}
	
	
	

	\chapter{Anforderungen}	
	
		\section{Tabelle: Daten TripAdvisor (Welche Daten holen wir uns? Hotel und Restaurants?) details}
		
		\section{Nicht funktionale Anforderungen: Benutzerfreundlichkeit etc.}
			bliblablablablubulskjfvba
			öajsvaölfkvpaijsdv
			\\
			öjydfpvoijaf
			v\\jdofhvöankfv
			aposdfjhvpuaohöjvhb
			
			
			
			
	\chapter{Implementierung}
	
		\section{Konfiguration}
		
			\subsection{Welche Version von Python}
			
			\subsection{Welche Pakete wurden importiert und warum}
			
		\section{Warum BeautifulSoup}
		
		\section{WebCrawler (Wie findet man die Daten auf der Webseite und wie holen wir sie uns.)}
		
			\subsection{RestaurantDaten}
			
			\subsection{Bewertungsdaten}
			
		\section{Datenhaltung}
			Die gewonnen Daten müssen nach der "Gewinnung" strukturiert abgelegt werden, um weitere Analysen ohne großen Mehraufwand durchführen zu können. 
		
			\subsection{Welche Datenbank wurde gewählt?	}
				Gewählt wurde tinyDB, da
			
				\subsubsection{Definition der Datenbankanforderungen}
					Wie viele Tabellen, IDs, Verknüpfungen, Primärschlüssel
				
				\subsubsection{Vergleich: SQLLite und TinyDB}
					Wieso tinyDB? SQLite zu zu trivial?:D
			
			\subsection{Daten bereinigen}
			
			\subsection{Datenbankstruktur}
			
				\subsubsection{Tabellen mit Spalten}
				
				\subsubsection{Zeichnung Zusammenhang?}
				
		\section{Benutzeroberfläche}
		
			\subsection{Wie die Umsetzung etc.}
			
			\subsection{Lösung mit URL}
	
	

	\chapter{Wurden Anforderungen erfüllt?}		
	
		\section{Ergebnisse}
		
	

	\chapter{Fazit und Ausblick}
	
		\section{Unsere Erfahrungen/Probleme (evtl. API)}

		\section{Wie sind wir damit klargekommen}


 
		
		Programmiersprache: Python
		hihii
				
			\begin{lstlisting} [caption={Registerprogrammierung der Expander}\label{code-i2c-1}, captionpos=b, style=Arduino]
			# -*- coding: utf-8 -*-
			import requests
			import os
			import unicodedata
			import validators
			import threading
			from tkinter import *
			from tkinter import messagebox
			from bs4 import BeautifulSoup
			from setuptools.package_index import HREF
			from tinydb import TinyDB,Query,where
			
			
			class Web_scraping:
			'''
			Created on 17.04.2018
			
			@author: anjawolf
			
			get_single_data: Data will be scraped from the Tripadvisors Website and stored in variables.
			'''
			def get_single_data(self,url):
			source_code = requests.get(url)
			plain_text = source_code.text
			soup = BeautifulSoup(plain_text, "html.parser")
			
			for self.name in soup.find('h1', {'class': 'heading_title'}):
			print("Name:" + self.name.string)
			
			for self.rating_amount in soup.find('span', {'property': 'count'}):
			print("Anzahl Bewertungen:" + self.rating_amount.string)
			
			for self.popularity in soup.find_all('span', {'class': 'header_popularity popIndexValidation'}):
			print("Popularitaet:" + self.popularity.text)
			
			for self.price_level in soup.find('span', {'class': 'header_tags rating_and_popularity'}):
			print("Preis Level:" + self.price_level.string)
			
			for self.cuisine in soup.find_all('span', {'class': 'header_links rating_and_popularity'}):
			print('Kueche:' + self.cuisine.text)
			
			for self.contact_details in soup.find('div', {'class': 'blRow'}):
			print('Kontaktdaten:' + self.contact_details.text)
			
			for self.address in soup.find('span', {'class': 'street-address'}):
			print("Strasse:" + self.address.string)
			
			for self.locality in soup.find('span', {'class': 'locality'}):
			print("PLZ:" + self.locality.string)
			
			for self.phonenumber in soup.find_all('div', {'class': 'blEntry phone'}):
			print("Telefonnummer:" + self.phonenumber.text)
			
						     
			\end{lstlisting}
	
	
	
	
%						    	Hinzufügen relevanter Verzeichnisse
%   									Abbildungsverzeichnis
	\clearpage
	\addcontentsline{toc}{chapter}{Abbildungsverzeichnis}
	\listoffigures
	
	
	
%   									Programmcodeverzeichnis	
	\clearpage
	%Erneute Bennenung für das Verzeichnis 
	\addcontentsline{toc}{chapter}{Programmcodeverzeichnis}
	\renewcommand{\lstlistingname}{Programmcodeverzeichnis}
	\lstlistoflistings
	\renewcommand{\lstlistlistingname}{\lstlistingname}
	
	
	
%   									Abkürzungsverzeichnis	
	\chapter*{Abkürzungsverzeichnis}
		\vspace{1.0cm}
		\begin{acronym}[SEPSEP]
			\acro{oem}[OEM]{Original Equipment Manufacturer}
			\acro{bob}[BOB]{Breakout-Box}
			\acro{can}[CAN]{Controller Area Network}
			\acro{lin}[LIN]{Local Interconnect Network}
			\acro{obd}[OBD]{On-Board-Diagnose}	
			\acro{sda}[SDA]{Serial Data Line}
			\acro{scl}[SCL]{Serial Clock Line}
			\acro{gui}[GUI]{Graphical User Interface}
			\acro{pdf}[PDF]{Portable Document Format}
			%\acro{SD}[SD]{Secure Digital Memory Card}
			%\acro{pc}[PC]{Personal Computer}
			%\acro{USB}[USB]{Universal Serial Bus}
		\end{acronym}
		\addcontentsline{toc}{chapter}{Abkürzungsverzeichnis}
	
	
	
%   									Formelverzeichnis	
	\chapter*{Formelverzeichnis}
		\vspace{1.0cm}
		\begin{center}
			\begin{tabularx}{\textwidth}{lXlXlXl}
				
				(\ref{formel2}, \ref{formel3})	& & R$_{CL}$ & & [$\Omega$]	& & Strombegrenzungswiderstand\\
				
				(\ref{formel4})	& & R$_{CS}$ & & [$\Omega$]	& & Strommesswiderstand\\
				
				(\ref{formel5} - \ref{formel9})	& & A\textit{x}\_v & & & & Binär-Konjunktion\\
				
			\end{tabularx}
		\end{center}
		\addcontentsline{toc}{chapter}{Formelverzeichnis}
	
	
	
%   									Literaturverzeichnis	
	\clearpage
	\addcontentsline{toc}{chapter}{Literaturverzeichnis}
	\begin{thebibliography}{9} 
		\vspace{1.0cm}
		%Internetrecherche 
		
		\bibitem{bib-handb} Kraftfahrzeugtechnik \\ Hans-Hermann Braess, Ulrich Seiffert Hrsg: \glqq Vieweg Handbuch Kraftfahrzeugtechnik\grqq, Springer-Vieweg-Verlag, S. 5, 7. Auflage 2013
			
		\bibitem{bib-hss-pic} Abbildung \ref{pic-hss} - High-Side-Switch\\ Texas Instruments: Datasheet TPS1H100-Q1 40-V, 100-m$\Omega$ Single-Channel Smart High-Side Power Switch; \newline \url{http://www.ti.com/lit/ds/symlink/tps1h100-q1.pdf}, Seite 32 (Figure 45), aufgerufen am \today	
	\end{thebibliography}
	
	
	
%   									Selbstständigkeitserklärung
	\newpage
	\setstretch{1.5}
	\chapter*{Eidesstattliche Erklärung}
		%\vspace{1.5\textheight}
		Hiermit erklären wir, Johannes Knippel, Anja Wolf, Johanna Sickendiek und Skanny, dass wir die vorliegende Arbeit mit dem Titel \textit{Auslesen und Abspeichern von unstrukturierten Daten am Beispiel von Tripadvisor} selbstständig verfasst, noch nicht anderweitig für Prüfungszwecke vorgelegt, keine anderen als die angegebenen Quellen oder Hilfsmittel benützt sowie wörtliche und sinngemäße Zitate als solche gekennzeichnet haben.
		\vspace{15mm}
		\\
		\\
		\begin{flushleft}
			\begin{tabular}[H]{ll}
				
				München, den \parbox{5,5cm}{\today}  	& 	\parbox{6cm}{\hrule\medskip \textit{Unterschrift}}\\[2cm]
													  	& 	\parbox{6cm}{\hrule\medskip \textit{Unterschrift}}\\[2cm]
													  	& 	\parbox{6cm}{\hrule\medskip \textit{Unterschrift}}\\[2cm]
													  	& 	\parbox{6cm}{\hrule\medskip \textit{Unterschrift}}\\[2cm]
			\end{tabular}
		\end{flushleft}
		\addcontentsline{toc}{chapter}{Eidesstattliche Erklärung}


\end{document}
%The End
%Johannes Knippel